<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Vault - Compost Finance</title>
  <meta name="description" content="Stake HYPE and earn fee-backed yield from Hyperliquid builder markets.">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@200;300;400;500;600&display=swap" rel="stylesheet">

  <style>
    :root {
      /* DESIGN.md colors - warm earth tones */
      --bg-deep: #0a0a09;
      --bg-layer-1: #111110;
      --bg-layer-2: #1a1918;
      --bg-layer-3: #252422;
      --stone: #3d3a36;
      --sand: #8a8279;
      --warm-gray: #6b665e;
      
      /* Text - warm tones */
      --text-primary: #e8e4df;
      --text-secondary: #9a958d;
      --text-muted: #5c574f;
      
      /* Accent - living green */
      --accent-bright: #4dcf6a;
      --accent: #2ba84a;
      --accent-muted: #1d7a35;
      --accent-glow: rgba(77, 207, 106, 0.15);
      --accent-glow-strong: rgba(77, 207, 106, 0.3);
      
      /* Logo pot colors */
      --pot-1: #8a7d6d;
      --pot-2: #5c5347;
      --pot-3: #3d3630;
      
      --error: #ef4444;
      --font: 'Outfit', -apple-system, sans-serif;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      font-size: 16px;
      -webkit-font-smoothing: antialiased;
    }

    body {
      font-family: var(--font);
      background: var(--bg-deep);
      color: var(--text-primary);
      line-height: 1.6;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Noise texture */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      opacity: 0.03;
      z-index: 1000;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    }

    /* Nav */
    .nav {
      padding: 1.5rem 3rem;
      border-bottom: 1px solid var(--bg-layer-3);
    }

    .nav-inner {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .nav-left {
      display: flex;
      align-items: center;
      gap: 2rem;
    }

    .nav-lockup {
      display: flex;
      align-items: flex-end;
      gap: 0.625rem;
      text-decoration: none;
    }

    .nav-mark {
      width: 22px;
      height: 30px;
      margin-bottom: -2px;
    }

    .nav-wordmark {
      font-size: 1.125rem;
      font-weight: 300;
      letter-spacing: 0.02em;
      color: var(--text-primary);
    }

    .nav-wordmark .tld {
      color: var(--accent-bright);
    }

    .nav-link {
      font-size: 0.875rem;
      font-weight: 400;
      color: var(--text-muted);
      text-decoration: none;
      transition: color 0.2s;
    }

    .nav-link:hover {
      color: var(--accent-bright);
    }

    .nav-link.active {
      color: var(--text-primary);
    }

    /* Stats Bar - horizontal single line */
    .stats-bar {
      background: var(--bg-layer-1);
      border-bottom: 1px solid var(--bg-layer-3);
      padding: 1.5rem 3rem;
    }

    .stats-inner {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      gap: 4rem;
      align-items: center;
    }

    .stat-item {
      display: flex;
      align-items: baseline;
      gap: 1rem;
    }

    .stat-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--text-muted);
    }

    .stat-value {
      font-size: 1.75rem;
      font-weight: 200;
      color: var(--text-primary);
    }

    .stat-value.accent {
      color: var(--accent-bright);
    }

    /* Main Dashboard */
    .dashboard {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem 3rem;
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 2rem;
      min-height: calc(100vh - 200px);
    }

    /* Left Column - Action Panel */
    .action-column {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .card {
      background: var(--bg-layer-2);
      border: 1px solid var(--bg-layer-3);
      padding: 2rem;
    }

    .card-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
    }

    .card-icon {
      width: 24px;
      height: 24px;
      opacity: 0.6;
    }

    .card-title {
      font-size: 0.875rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--text-secondary);
    }

    /* Position Card */
    .position-grid {
      display: grid;
      gap: 0.75rem;
    }

    .position-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      padding: 0.5rem 0;
    }

    .position-label {
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    .position-value {
      font-size: 1rem;
      font-weight: 400;
      color: var(--text-primary);
    }

    .position-gain {
      color: var(--accent-bright);
    }

    /* Tabs */
    .tabs {
      display: flex;
      border-bottom: 1px solid var(--bg-layer-3);
      margin-bottom: 1.5rem;
    }

    .tab {
      flex: 1;
      padding: 0.75rem 1rem;
      background: none;
      border: none;
      border-bottom: 2px solid transparent;
      font-family: var(--font);
      font-size: 0.875rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.2s;
    }

    .tab.active {
      color: var(--text-primary);
      border-bottom-color: var(--accent);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* Input */
    .input-group {
      margin-bottom: 1.5rem;
    }

    .input-label {
      font-size: 0.75rem;
      color: var(--text-secondary);
      margin-bottom: 0.5rem;
      display: block;
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    .input-wrapper {
      display: flex;
      gap: 0.5rem;
    }

    .input-field {
      flex: 1;
      padding: 0.75rem 1rem;
      background: var(--bg-layer-1);
      border: 1px solid var(--bg-layer-3);
      font-family: var(--font);
      font-size: 1.125rem;
      color: var(--text-primary);
      outline: none;
      transition: border-color 0.2s;
    }

    .input-field:focus {
      border-color: var(--accent);
    }

    .input-field::placeholder {
      color: var(--text-muted);
    }

    .helper-btn {
      padding: 0.75rem 1rem;
      background: none;
      border: 1px solid var(--bg-layer-3);
      font-family: var(--font);
      font-size: 0.75rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.2s;
      min-width: 60px;
    }

    .helper-btn:hover {
      border-color: var(--accent);
      color: var(--accent-bright);
    }

    .balance-hint {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 0.375rem;
    }

    /* Output */
    .output-group {
      margin-bottom: 1.5rem;
    }

    .output-value {
      font-size: 1.5rem;
      font-weight: 400;
      color: var(--accent-bright);
    }

    .detail-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 0.5rem;
      font-size: 0.8125rem;
    }

    .detail-label {
      color: var(--text-secondary);
    }

    .detail-value {
      color: var(--text-muted);
    }

    /* Button */
    .btn {
      width: 100%;
      padding: 1rem;
      background: var(--accent);
      border: none;
      font-family: var(--font);
      font-size: 0.875rem;
      font-weight: 500;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--bg-deep);
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
      overflow: hidden;
      margin-top: 1rem;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%);
      transform: translateX(-100%);
      transition: transform 0.5s ease;
    }

    .btn:hover::before {
      transform: translateX(100%);
    }

    .btn:hover {
      box-shadow: 0 0 40px var(--accent-glow-strong);
    }

    .btn:disabled {
      background: var(--bg-layer-1);
      color: var(--text-muted);
      cursor: not-allowed;
      box-shadow: none;
    }

    .btn:disabled::before {
      display: none;
    }

    .disclaimer {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 0.75rem;
      text-align: center;
    }

    /* Right Column - Info Panel */
    .info-column {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    /* Info List */
    .info-list {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .info-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      padding: 0.5rem 0;
      border-bottom: 1px solid var(--bg-layer-3);
    }

    .info-row:last-child {
      border-bottom: none;
    }

    .info-label {
      font-size: 0.8125rem;
      color: var(--text-secondary);
    }

    .info-value {
      font-size: 0.9375rem;
      font-weight: 400;
      color: var(--text-primary);
      text-align: right;
    }

    .info-value.accent {
      color: var(--accent-bright);
    }

    .info-value small {
      display: block;
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 0.125rem;
    }

    /* Market List */
    .market-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.625rem 0;
    }

    .market-name {
      font-size: 0.875rem;
      color: var(--text-primary);
    }

    .market-allocation {
      font-size: 0.875rem;
      color: var(--accent-bright);
    }

    /* Responsive */
    @media (max-width: 968px) {
      .dashboard {
        grid-template-columns: 1fr;
      }

      .stats-inner {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }

      .nav,
      .stats-bar,
      .dashboard {
        padding-left: 1.5rem;
        padding-right: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <!-- Nav -->
  <nav class="nav">
    <div class="nav-inner">
      <div class="nav-left">
        <a href="/" class="nav-lockup">
          <svg class="nav-mark" viewBox="0 0 64 80" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M29 44 C27 38 29 34 32 30 C34 28 38 29 40 32 C42 35 39 37 36 36 C33 35 33 33 32 31 C31 35 30 41 31 44 Z" fill="#4dcf6a"/>
            <path d="M29 44 C27 38 30 34 32 30 L34 31 C31 34 30 40 31 44 Z" fill="#2ba84a"/>
            <rect x="10" y="48" width="44" height="9" rx="4" fill="#8a7d6d"/>
            <rect x="14" y="59" width="36" height="9" rx="4" fill="#5c5347"/>
            <rect x="18" y="70" width="28" height="8" rx="4" fill="#3d3630"/>
          </svg>
          <div class="nav-wordmark">compost<span class="tld">.fi</span></div>
        </a>
        <a href="/vault.html" class="nav-link active">Vault</a>
      </div>
      <div>
        <a href="https://docs.compost.fi" class="nav-link">Docs</a>
        <a href="https://twitter.com/compostfi" class="nav-link" target="_blank" rel="noopener">@compostfi</a>
      </div>
    </div>
  </nav>

  <!-- Stats Bar -->
  <section class="stats-bar">
    <div class="stats-inner">
      <div class="stat-item">
        <div class="stat-label">TVL</div>
        <div class="stat-value">$4.2M</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">APY</div>
        <div class="stat-value accent">6.3%</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">cHYPE/HYPE</div>
        <div class="stat-value">1.024</div>
      </div>
    </div>
  </section>

  <!-- Main Dashboard -->
  <main class="dashboard">
    <!-- Left Column: Action -->
    <div class="action-column">
      <!-- Position Card -->
      <div class="card">
        <div class="card-header">
          <svg class="card-icon" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M32 6 L52 14 L52 30 C52 44 42 54 32 58 C22 54 12 44 12 30 L12 14 L32 6 Z" fill="none" stroke="#8a7d6d" stroke-width="2.5"/>
            <path d="M32 14 L44 20 L44 30 C44 40 38 47 32 50 C26 47 20 40 20 30 L20 20 L32 14 Z" fill="none" stroke="#5c5347" stroke-width="1.5"/>
            <path d="M24 32 L30 38 L42 26" stroke="#4dcf6a" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <h2 class="card-title">Your Position</h2>
        </div>
        <div class="position-grid">
          <div class="position-row">
            <span class="position-label">HYPE staked</span>
            <span class="position-value">1,234.56</span>
          </div>
          <div class="position-row">
            <span class="position-label">cHYPE balance</span>
            <span class="position-value">1,205.38</span>
          </div>
          <div class="position-row">
            <span class="position-label">Current value</span>
            <span class="position-value">1,264.23 HYPE</span>
          </div>
          <div class="position-row">
            <span class="position-label">Gain</span>
            <span class="position-value position-gain">+29.67 (+2.4%)</span>
          </div>
        </div>
      </div>

      <!-- Stake/Unstake Card -->
      <div class="card">
        <div class="tabs">
          <button class="tab active" data-tab="stake">Stake</button>
          <button class="tab" data-tab="unstake">Unstake</button>
        </div>

        <!-- Stake Tab -->
        <div class="tab-content active" id="stake-content">
          <div class="input-group">
            <label class="input-label">You stake</label>
            <div class="input-wrapper">
              <input type="text" class="input-field" id="stake-input" placeholder="0.00">
              <button class="helper-btn" id="stake-half">Half</button>
              <button class="helper-btn" id="stake-max">Max</button>
            </div>
            <div class="balance-hint">Balance: 1,234.56 HYPE</div>
          </div>

          <div class="output-group">
            <label class="input-label">You receive</label>
            <div class="output-value" id="stake-output">0.00 cHYPE</div>
          </div>

          <div class="detail-row">
            <span class="detail-label">Exchange rate</span>
            <span class="detail-value">1 cHYPE = 1.024 HYPE</span>
          </div>

          <div class="detail-row">
            <span class="detail-label">Network cost</span>
            <span class="detail-value">~$0.01</span>
          </div>

          <button class="btn" id="stake-btn" disabled>Stake HYPE</button>

          <div class="disclaimer">14-day unstake period applies</div>
        </div>

        <!-- Unstake Tab -->
        <div class="tab-content" id="unstake-content">
          <div class="input-group">
            <label class="input-label">You unstake</label>
            <div class="input-wrapper">
              <input type="text" class="input-field" id="unstake-input" placeholder="0.00">
              <button class="helper-btn" id="unstake-half">Half</button>
              <button class="helper-btn" id="unstake-max">Max</button>
            </div>
            <div class="balance-hint">Balance: 1,205.38 cHYPE</div>
          </div>

          <div class="output-group">
            <label class="input-label">You receive</label>
            <div class="output-value" id="unstake-output">0.00 HYPE</div>
          </div>

          <div class="detail-row">
            <span class="detail-label">Exchange rate</span>
            <span class="detail-value">1 cHYPE = 1.024 HYPE</span>
          </div>

          <div class="detail-row">
            <span class="detail-label">Network cost</span>
            <span class="detail-value">~$0.01</span>
          </div>

          <button class="btn" id="unstake-btn" disabled>Unstake</button>

          <div class="disclaimer">âš  14-day waiting period after unstaking</div>
        </div>
      </div>
    </div>

    <!-- Right Column: Info -->
    <div class="info-column">
      <!-- APY Breakdown -->
      <div class="card">
        <div class="card-header">
          <svg class="card-icon" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 48 L12 32 L20 24 L32 36 L44 20 L52 28 L52 48" fill="none" stroke="#4dcf6a" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="12" y1="52" x2="52" y2="52" stroke="#8a7d6d" stroke-width="2"/>
          </svg>
          <h2 class="card-title">APY Breakdown</h2>
        </div>
        <div class="info-list">
          <div class="info-row">
            <span class="info-label">Base staking</span>
            <span class="info-value">2.1%</span>
          </div>
          <div class="info-row">
            <span class="info-label">Builder fees</span>
            <span class="info-value">4.2%</span>
          </div>
          <div class="info-row">
            <span class="info-label">Total APY</span>
            <span class="info-value accent">6.3%</span>
          </div>
        </div>
      </div>

      <!-- Allocations -->
      <div class="card">
        <div class="card-header">
          <svg class="card-icon" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="32" cy="20" r="8" fill="none" stroke="#4dcf6a" stroke-width="2.5"/>
            <circle cx="18" cy="44" r="6" fill="none" stroke="#8a7d6d" stroke-width="2"/>
            <circle cx="32" cy="50" r="6" fill="none" stroke="#8a7d6d" stroke-width="2"/>
            <circle cx="46" cy="44" r="6" fill="none" stroke="#8a7d6d" stroke-width="2"/>
            <line x1="28" y1="26" x2="20" y2="38" stroke="#5c5347" stroke-width="2"/>
            <line x1="32" y1="28" x2="32" y2="44" stroke="#5c5347" stroke-width="2"/>
            <line x1="36" y1="26" x2="44" y2="38" stroke="#5c5347" stroke-width="2"/>
          </svg>
          <h2 class="card-title">Allocated to</h2>
        </div>
        <div class="info-list">
          <div class="market-item">
            <span class="market-name">trade.xyz</span>
            <span class="market-allocation">40%</span>
          </div>
          <div class="market-item">
            <span class="market-name">Kinetiq Markets</span>
            <span class="market-allocation">30%</span>
          </div>
          <div class="market-item">
            <span class="market-name">Ventuals</span>
            <span class="market-allocation">20%</span>
          </div>
          <div class="market-item">
            <span class="market-name">Felix</span>
            <span class="market-allocation">10%</span>
          </div>
        </div>
      </div>

      <!-- Infrastructure -->
      <div class="card">
        <div class="card-header">
          <svg class="card-icon" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="10" y="12" width="44" height="44" rx="4" fill="none" stroke="#8a7d6d" stroke-width="2.5"/>
            <rect x="16" y="18" width="32" height="32" rx="2" fill="none" stroke="#5c5347" stroke-width="1.5"/>
            <circle cx="32" cy="34" r="10" fill="none" stroke="#4dcf6a" stroke-width="2"/>
            <circle cx="32" cy="34" r="4" fill="#4dcf6a"/>
            <rect x="46" y="30" width="6" height="8" rx="1" fill="#3d3630"/>
          </svg>
          <h2 class="card-title">Infrastructure</h2>
        </div>
        <div class="info-list">
          <div class="info-row">
            <span class="info-label">Vault</span>
            <span class="info-value">
              Infrasingularity
              <small>Secure vault infrastructure</small>
            </span>
          </div>
          <div class="info-row">
            <span class="info-label">Custody</span>
            <span class="info-value">
              Fireblocks
              <small>Institutional custody</small>
            </span>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Constants
    const EXCHANGE_RATE = 1.024;
    const USER_HYPE_BALANCE = 1234.56;
    const USER_CHYPE_BALANCE = 1205.38;

    // Tab switching
    const tabs = document.querySelectorAll('.tab');
    const tabContents = document.querySelectorAll('.tab-content');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const targetTab = tab.dataset.tab;

        tabs.forEach(t => t.classList.remove('active'));
        tabContents.forEach(content => content.classList.remove('active'));

        tab.classList.add('active');
        document.getElementById(`${targetTab}-content`).classList.add('active');
      });
    });

    // Stake functionality
    const stakeInput = document.getElementById('stake-input');
    const stakeOutput = document.getElementById('stake-output');
    const stakeBtn = document.getElementById('stake-btn');
    const stakeHalfBtn = document.getElementById('stake-half');
    const stakeMaxBtn = document.getElementById('stake-max');

    function calculateStakeOutput(hypoValue) {
      return hypoValue / EXCHANGE_RATE;
    }

    function updateStakeOutput() {
      const value = parseFloat(stakeInput.value) || 0;
      const output = calculateStakeOutput(value);
      stakeOutput.textContent = `${output.toFixed(2)} cHYPE`;
      stakeBtn.disabled = value <= 0 || value > USER_HYPE_BALANCE;
    }

    stakeInput.addEventListener('input', updateStakeOutput);
    stakeHalfBtn.addEventListener('click', () => {
      stakeInput.value = (USER_HYPE_BALANCE / 2).toFixed(2);
      updateStakeOutput();
    });
    stakeMaxBtn.addEventListener('click', () => {
      stakeInput.value = USER_HYPE_BALANCE.toFixed(2);
      updateStakeOutput();
    });

    // Unstake functionality
    const unstakeInput = document.getElementById('unstake-input');
    const unstakeOutput = document.getElementById('unstake-output');
    const unstakeBtn = document.getElementById('unstake-btn');
    const unstakeHalfBtn = document.getElementById('unstake-half');
    const unstakeMaxBtn = document.getElementById('unstake-max');

    function calculateUnstakeOutput(chypeValue) {
      return chypeValue * EXCHANGE_RATE;
    }

    function updateUnstakeOutput() {
      const value = parseFloat(unstakeInput.value) || 0;
      const output = calculateUnstakeOutput(value);
      unstakeOutput.textContent = `${output.toFixed(2)} HYPE`;
      unstakeBtn.disabled = value <= 0 || value > USER_CHYPE_BALANCE;
    }

    unstakeInput.addEventListener('input', updateUnstakeOutput);
    unstakeHalfBtn.addEventListener('click', () => {
      unstakeInput.value = (USER_CHYPE_BALANCE / 2).toFixed(2);
      updateUnstakeOutput();
    });
    unstakeMaxBtn.addEventListener('click', () => {
      unstakeInput.value = USER_CHYPE_BALANCE.toFixed(2);
      updateUnstakeOutput();
    });

    // Button handlers (mock)
    stakeBtn.addEventListener('click', () => {
      alert('Stake functionality will be connected to smart contract');
    });
    unstakeBtn.addEventListener('click', () => {
      alert('Unstake functionality will be connected to smart contract');
    });
  </script>
</body>
</html>
